<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [3D 概念](#3d-概念)
	- [3D显示方法](#3d显示方法)
		- [平行投影](#平行投影)
		- [透视投影](#透视投影)
		- [深度提示](#深度提示)
		- [可见线面的标识](#可见线面的标识)
		- [表面绘制](#表面绘制)
- [3D物体的表示](#3d物体的表示)
	- [实体表示方法](#实体表示方法)
		- [边界表示](#边界表示)
		- [空间分区表示](#空间分区表示)
	- [多边形表面](#多边形表面)
		- [多边形表](#多边形表)
			- [几何表](#几何表)
			- [属性表](#属性表)
			- [平面方程](#平面方程)
			- [二次曲面](#二次曲面)
			- [样条表示spline representation](#样条表示spline-representation)
				- [样条曲线生成](#样条曲线生成)
			- [样条类型](#样条类型)
			- [连续性条件](#连续性条件)
				- [参数连续性C<sup>0</sup> ~ C<sup>n</sup>](#参数连续性csup0sup-csupnsup)
				- [几何连续性G<sup>0</sup> ~ G<sup>n</sup>](#几何连续性gsup0sup-gsupnsup)
			- [Bezier Curves贝塞尔曲线](#bezier-curves贝塞尔曲线)
				- [Bezier构造公式](#bezier构造公式)
				- [样例](#样例)
				- [特点](#特点)
				- [设计技术](#设计技术)
			- [立体构造solid-modeling](#立体构造solid-modeling)
				- [扫描表示](#扫描表示)
				- [构造立体几何法 - CSG](#构造立体几何法-csg)
			- [八叉树octrees](#八叉树octrees)
				- [数据结构](#数据结构)
				- [表示特点](#表示特点)
			- [四叉树](#四叉树)
				- [思路](#思路)
				- [数据结构](#数据结构)
				- [同质象限](#同质象限)
				- [样例](#样例)
			- [分型fractal](#分型fractal)
				- [欧式几何法 vs 分形几何法](#欧式几何法-vs-分形几何法)
				- [基本特征](#基本特征)
				- [生成过程](#生成过程)
				- [分类](#分类)
				- [维数概念](#维数概念)
				- [示例](#示例)
- [3D几何变换](#3d几何变换)
- [3D观察](#3d观察)
- [可见面判别算法](#可见面判别算法)
- [光照模型与面绘制算法](#光照模型与面绘制算法)

<!-- /TOC -->

<!-- 21 ~ 25 -->

# 3D 概念

## 3D显示方法

### 平行投影
![](images/parallel_projection_1.jpg)
![](images/parallel_projection_2.jpg)
> 平行线...
> 立体感不强

### 透视投影
![](images/perspective_projection_1.jpg)
![](images/perspective_projection_2.jpg)
> 有投影点
> 近大远小效果

### 深度提示
> 思路
>> 近亮远暗
>> 近大远小

> 问题
>> **二义性** 三维和二维的混乱...


### 可见线面的标识


### 表面绘制
> 思路
>> 根据场景中的光线条件以及指定表面的特性（透明、粗糙、平滑程度）来建立物体表面的亮度、纹理细节，增强显示的真实性

# 3D物体的表示

## 实体表示方法

### 边界表示
> 使用一组平面或曲面逼近表示3D对象

* 多边形表面polygon surfaces
* 二次曲面quadric surfaces
* 样条表示spline representation

### 空间分区表示
> 用于描述内部性质，将包含3D对象的空间分区划分为一组较小的、非重叠的连续立体（立方体）

* 立体构造solid-modeling
* 八叉树octrees
* 分型fractal

## 多边形表面
> 多面体的多边形表示精确的定义了物体的表面特征
> 其他物体，则使用多边形网格逼近表示
![](images/polygon_mesh_1.jpg)

### 多边形表

#### 几何表
> 包含顶点坐标和用来标识多边形表面控件方向的参数

* 点表
* 边表
* 面表

#### 属性表
> 包含物体透明度以及表面反射度的参数和纹理特征

#### 平面方程
> 公式： Ax + By + Cz + D = 0
> 用途： 点和面的关系（是否在面上）， < 0 在面内； > 0 在面外 （**#yonka# 是不是搞错了？**）

#### 二次曲面
> 可以为简单的3D对象提供精确描述，如球体

* 球面
* 椭球面
* 环面
* 超二次曲面

#### 样条表示spline representation
> 定义： 样条曲线由多项式曲线段连接而成，并且在每段的边界处满足特定的连续性条件
> 样条曲面使用两组正交样条曲线进行描述
> 参数方程
>> P(u) = (x(u), y(u), z(u))
>> P(u, v) = (x(u, v), y(u, v), z(u, v))

##### 样条曲线生成
1. 给定一组控制点，指明曲线的大致形状
2. 根据控制点以及选择的多项式构造公式生成参数方程（多项式函数）
3. 根据参数方程显示曲线

#### 样条类型
* 控制点的插值样条曲线
* 控制点的逼近样条曲线

#### 连续性条件
##### 参数连续性C<sup>0</sup> ~ C<sup>n</sup>
> 相邻曲线段在交点处参数导数相等
* 零阶参数连续C<sup>0</sup>
* 一阶参数连续C<sup>1</sup>
* 二阶参数连续C<sup>2</sup>

> ![](images/continuity_1.jpg)

##### 几何连续性G<sup>0</sup> ~ G<sup>n</sup>
> 相邻曲线段在交点处参数导数成比例

#### Bezier Curves贝塞尔曲线
* Pierre Bezier
* Renault

##### Bezier构造公式
>> 假定给出n+1个控制点： p<sub>k</sub> = (x<sub>k</sub>, y<sub>k</sub>, z<sub>k</sub>)，k取值范围为0到n。
>> 用于和成向量 P(u)。
>> P(u) = Σ<sub>0,n</sub>P<sub>k</sub> \* B<sub>k,n</sub>(u)

> 合成函数
>> B<sub>k,n</sub>(u) = C(n,k) \* u<sup>k</sup> \* (1-u)<sup>n-k</sup>
>> C(n,k) = n! / (k! \* (n-k)!)

##### 样例
* 二次bezier曲线
* 立方bezier曲线

##### 特点
![](images/bezier_curves_1.jpg)
* 总是通过第一个和最后一个控制点（P(0) = p<sub></sub>， P(1) = p<sub>n</sub>）
* 在起始点处的切线在头两个控制点的连线上； 在终点处的切点在最后两个控制点的连线上 P'(0) = -np<sub>p</sub> + np<sub>1</sub>； P'(1) = -np<sub>n-1</sub> + np<sub>n</sub>

> #yonka# 前面两点总结为： 从起始点沿着头两个点连线方向出发； 沿着最后两个点连线方向回到终点

* 任何bezier曲线总是落在控制点的凸壳内 Σ<sub>k=[0,n]</sub>B<sub>k,n</sub>(u) = 1
> 参见图，也即凸的方向不会和控制点直线连线相反。 --- 稳定性，不会任意摆动


##### 设计技术
* 起始点和终点重合 得到 封闭bezier曲线
* 多个控制点位于同一位置会对该位置加以更多的权
* 零阶参数连续bezier曲线的构造 p<sub>n</sub> = p'<sub>0</sub>
* 一阶参数连续bezier曲线的构造 2p<sub>n</sub> - p<sub>n-1</sub>

  ![](images/bezier_curves_2.jpg)


#### 立体构造solid-modeling

##### 扫描表示
> 通过指定一个2D形状以及在空间区域内移动该形状的扫描来描述该3D对象

##### 构造立体几何法 - CSG
> 通过对两个指定3D对象进行并、交货差操作产生一个新的3D对象

#### 八叉树octrees
> 把三维空间连续划分成八个卦限得到八叉树

##### 数据结构

##### 表示特点
* 空间分区表示方法，存储3D物体内部信息
* 利用空间相关性减少存储空间需求量
* 二维平面四叉树编码方法的扩展

#### 四叉树

##### 思路
>> 通过连续将二维平面化分成四等份得到四叉树

##### 数据结构

##### 同质象限

##### 样例

#### 分型fractal

##### 欧式几何法 vs 分形几何法
* 欧式几何法
> 用**方程**描述具有平滑表面和规则形状的3D对象
* 分形几何法
> 用**过程**建立具有不规则或细碎特征的自然对象的模型

##### 基本特征
* 每点具有无限细节
  * 动态变化
  * 任意两点的距离不确定
* 对象整体和局部之间的自相似性

##### 生成过程
> 思路
>> 重复使用指定的变换函数作用于空间区域中的点的过程
>> 起始点 P0，变换函数 F
>> P1 = F(P0), P2 = F(P1), P3 = F(P2) ......

![](images/fractal_snowflake.jpg)

##### 分类
* 自相似分形
> 组成部分是整个物体的收缩形式。 从初始形状开始，对整个物体应用缩放参数s来构造物体的子部件
> 类型
  * 确定自相似分形
  * 统计自相似分形

> 用于模拟数目、灌木和其他植物

* 自仿射分形
> 组成部分由不同坐标方向上的不同缩放参数sx、sy、sz形成
> 类型
  * 确定自仿射分形
  * 统计自仿射分形

> 用于模拟岩层、水和云等自然景物

* 不变分形集
> 由非线性变化形成
> 类型
  * 自平方分形
  * 自逆分形

##### 维数概念
> 描述分型对象细节的变化量，是对象粗糙性或细碎性的度量
> 分形维数 vs 欧式维数
* 欧式维数 是指定物体参数的最小维数，是整数维
* 分形维数 可以是非整数

> 分形维数计算
>> 确定性自相似分形维数计算 D = Ln N / Ln(1/s)
>>> 科勒雪花 D = Ln 4 / Ln(1/1/3) = 1.2619

##### 示例

# 3D几何变换

# 3D观察

# 可见面判别算法


# 光照模型与面绘制算法
